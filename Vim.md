# Vim的101教學
## 介紹
這是一篇Vim的使用教學，目標讀者為想使用Vim編輯文件卻不知從何而起的入門使用者。中高階的Vimer請別往下閱讀以免浪費您的時間。
## Vim的介紹
Vim被人暱稱是神之編輯器，與編輯器之神Emacs在文字編輯器的歷史上佔有最崇高的地位。它是一個古老的文字編輯器，但一點也不落後，是許多程式開發者心中最棒的工具之一。Vim具有相當大的擴充空間，有人云，在Vim中只要想得到，沒有不存在的功能。Vim最讓人喜愛的特點是，操作時完全不需要使用滑鼠，可以讓雙手的一直放在鍵盤上專心打字。Vim在所有作業系統裡都能使用，且內建於Unix-like的作業系統裡。
## 下載與進入Vim
Vim已經內建於Unix-like的系統中了，打開終端機後就能開始使用。而Windows的使用者在Vim官網下載之後就可以在CMD中將之開啟。Vim的開啟方式是在命令列中輸入vi或vim，打開之後就會進入Vim的歡迎頁面，可以開始Vim了。
## Vim的四種模式
Vim提供不同模式來達成許多功能，當前的使用模式會顯示在左下角，請注意當前模式為何再行操作，否則可能會對文件作出意外之中的更動而不自知。
1. Normal mode(普通模式)
進入Vim之後就是普通模式。在普通模式中才可以進入其他模式之中，而在其他模式之中按下「esc」就會回到普通模式，使用Vim會需要頻繁地進出模式，所以擁有一個好按的esc鍵會是很舒適的，若讀者像我使用 MBP touch bar 可能會需要一點時間來適應。Vim有大部分的時間會處在普通模式裡，在這個模式中才可以進行查找、快速移動、複製貼上等等。
2. Insert mode(輸入模式)
按下「i」方可進入輸入模式，顧名思義這個模式讓使用者輸入文字進文件之中，若將Vim保持在這個模式之中並且以箭頭來移動游標，會使得Vim與其他編輯器無異。一般來說，初學者會因為不熟悉Vim的操作方式而會在這個模式會停留最多時間。
3. Visual mode(可視模式)
按下「v」進入可視模式，可視模式其實就是將字元反藍，在需要複製文字或刪除特定文字時會需要進入這個模式。而使用「V」(也就是shift + v，下文亦同)則會直接將整行進行反藍。
4. Replace mode(替換模式)
以「R」進入這個模式，在這個模式下輸入任何文字都會替換當前的字元。但這個模式並不實用，且可以透過其他方法代替，可以不必理會。
## Vim的使用方法
讀者可以用快捷鍵的思維來理解Vim的操作方式，將滑鼠可以做到的所有事情拆解成一個個功能，並且設定數種快捷鍵來使用這些功能。以下按鍵功能皆需要在普通模式與可視模式才能做使用。
* 在文件中移動
 1. 小範圍移動：
「hjkl」分別代表『左下上右』。
「w」將游標移動到下一個單字字首。例如：Hello Vim，從H移動到V。
「e」將游標移動到下一個單字字尾。例如：Hello Vim，從H移動到o。
「f」以f加上一個字母，將游標移動到本行下個字母。例如：Hello Vim，在H處使用fi，游標將移動到i。
「0」將游標移至所在行的第一個位置。
「g_」可以在行首與行尾進行移動。
 2. 中範圍移動：
「H」將游標移動到畫面最上方行。可以記做High。
「M」將游標移動到畫面最中間行。可以記做Middle。
「L」將游標移動到畫面最下方行。可以記做Low。
 3. 大範圍移動：
「{」&「}」將游標以段落為單位進行移動。
「gg」將游標移動到文件的第一行。
「G」將游標移動到文件的最後一行。
 4. 其他移動方式：
「:+數字」以冒號進入指令欄位後，輸入欲使游標前往的行數。
「數字+hjkl」以數字作為移動的次數。例如：10j，就是從當前行往下走10行。搭配相對行數非常好使用。
以上移動方式皆可在普通模式與可視模式下使用。
<br>
* 複製貼上
複製之前需要進入可視模式來選取需要複製文字內容，所以需求所有移動游標的能力，建議在掌握移動方法之後再練習複製貼上。
「y」選取完所需的文字內容後按下即可進行複製。y代表yank。
「Y」直接複製游標所在行，不需進入可視模式。
「p」在游標所在行之下貼上複製後的內容。p代表paste。
「P」在游標所在行之上貼上複製後的內容。
「v」進入可視模式，以移動游標進行選取。
「V」進入可視模式，且保持整行選取。
<br>
* 調整文件縮排
「<」將選取後的行，增加一個層次的縮排。
「>」將選取後的行，減少一個層次的縮排。
「=」將選取行進行智慧縮排。在自由格式的文件如 html 尤其實用。以連續指令 gg=G 可以整理整份文件。
<br>
* 進入輸入模式的其他方法
「i」進入輸入模式。
「I」在游標所在行行首進入輸入模式。
「o」在游標所在行的下一行進入輸入模式。
「O」在游標所在行的上一行進入輸入模式。
「a」在游標所在位置的下一格進入輸入模式。
「A」在游標所在行的行尾進入輸入模式。
「c」將選取後的內容刪除後進入輸入模式。
「C」將游標所在位置到行尾的內容刪除後進入輸入模式。
「s」將游標之下的字元刪除後進入輸入模式。
「S」將整行刪除之後進入輸入模式。
<br>
* 搜尋文件中的字
「/」按下反斜線之後即可在左下角輸入欲搜尋的字串。
「n」搭配搜尋字串使用，將游標移到搜尋到的下一個字串。
「N」將游標移動到搜尋到的上一個字串。
<br>
* 進入輸入模式的其他方法
「i」進入輸入模式。
「I」在游標所在行行首進入輸入模式。
「o」在游標所在行的下一行進入輸入模式。
「O」在游標所在行的上一行進入輸入模式。
「a」在游標所在位置的下一格進入輸入模式。
「A」在游標所在行的行尾進入輸入模式。
「c」將選取後的內容刪除後進入輸入模式。
「C」將游標所在位置到行尾的內容刪除後進入輸入模式。
「s」將游標之下的字元刪除後進入輸入模式。
「S」將整行刪除之後進入輸入模式。
<br>
* 調整視角
「C+e」將畫面往下移。
「C+y」將畫面往上移。
「zz」將游標所在行放置在畫面正中間。
「zt」將游標所在行放置在畫面最上行。
「zb」將游標所在行放置在畫面最下行。
<br>
* 其他功能
「u」代表undo，取消上一步更動。
「C+r」代表redo，在undo之後執行回來。
「.」重複上一步動作。在重複更改同一字串或是推進數個縮排時相當實用。
## 進入指令欄「:」
在Vim中若要使用更複雜的功能就必須在指令欄輸入指令，以「:」進入指令欄。以下為常用指令。
<br>
「:w」儲存文件的所有變更。
「:q」離開文件。若文件發生變更卻未儲存則無法離開文件。
「:wq」儲存且關閉文件。
「:q!」不儲存文件的變更直接離開。
「:! 指令」跳脫至終端機的命令列中輸入指令。若需要在終端機命令列中再輸入指令則可以再輸入一次「:! 指令」。

## Vim的設定檔
Vim的原始功能及畫面相當陽春，但可以根據功能需求在設定檔中作增加，這個設定檔就是 .vimrc ，因為它是位在根目錄的隱藏檔案，可以利用「ls -a」指令找到它，並以「vim .vimrc」命令來用vim編輯它。輸入指令「vim 檔名」就能以Vim編輯該檔案。初學者可以先挪用別人的設定檔，快速的讓自己的Vim畫面變得好看，但筆者建議在熟練Vim且具備更多Vim的知識之後，應當自行編寫這個設定檔來客製自己專屬的Vim。
## Vim安裝套件
在Vim中有更多功能可以透過安裝套件來獲得，例如搜尋文件用的Nerdtree、美化畫面的Airline、寫日記的工具Vimwiki與Calender等等，透過安裝別人寫好的套件我們可以將Vim一步步打造成自己的ide。有幾種安裝套件的方法，在這邊介紹Vundle，其名是Vim bundle的縮寫。
## 結語
在網路上有許多文章表示Vim是相當難上手的編輯器，其學習曲線之陡峭讓許多人望之卻步，似乎非得花上一整年練習才能上手，但其實不然，以我的經驗只耗費三四個星期就能完全掌握上述的所有功能。我建議有志於使用Vim作為主力編輯器者，可先在空閒時利用Vim編寫英文日記，熟悉游標移動的方式與模式之間的切換，再利用Vim編寫簡單的side project來熟悉其他功能，俄頃之間就會發覺自己已經習慣Vim的操作方法，而後就會擺脫使用滑鼠的習慣，並且在編輯程式碼時來去自如。

